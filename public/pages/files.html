<div class="stack">
  
  <div class="mb-m">
    <h2 class="text-2xl font-semibold" x-text="$store.i18n.t('files.fileManager')"></h2>
    <p class="text-gray-600 mt-s" x-text="$store.i18n.t('files.manageFiles')"></p>
  </div>
  
  
  <div class="flex gap-s mb-m">
    <button @click="switchTab('configs')" 
            class="btn" 
            :class="activeTab === 'configs' ? 'btn-primary' : 'btn-ghost'">
      ‚öôÔ∏è <span x-text="$store.i18n.t('files.configurations')"></span>
    </button>
    <button @click="switchTab('results')" 
            class="btn" 
            :class="activeTab === 'results' ? 'btn-primary' : 'btn-ghost'">
      üìä <span x-text="$store.i18n.t('files.results')"></span>
    </button>
  </div>
  
  
  <nav x-show="currentPath" class="mb-m">
    <ol class="flex items-center gap-s text-sm">
      <template x-for="(crumb, index) in getBreadcrumbs()" :key="crumb.path">
        <li class="flex items-center">
          <button @click="navigateToBreadcrumb(crumb.path)" 
                  class="text-primary hover:underline"
                  :class="index === getBreadcrumbs().length - 1 ? 'font-medium' : ''"
                  x-text="crumb.name"></button>
          <span x-show="index < getBreadcrumbs().length - 1" class="mx-s text-gray-400">/</span>
        </li>
      </template>
    </ol>
  </nav>
  
  
  <div class="flex justify-between items-center mb-m">
    <div class="meta-text">
      <span x-text="currentFiles.length"></span> <span x-text="$store.i18n.t('files.files')"></span>
    </div>
    <div class="flex gap-s">
      <button x-show="currentPath" 
              @click="navigateUp()" 
              class="btn btn-ghost btn-sm">
        ‚Üë <span x-text="$store.i18n.t('buttons.up')"></span>
      </button>
      <button x-show="activeTab === 'configs'" 
              @click="createNewConfig()" 
              class="btn btn-primary btn-sm">
        + <span x-text="$store.i18n.t('buttons.newConfiguration')"></span>
      </button>
    </div>
  </div>
  
  
  <div x-show="isLoading" class="flex justify-center items-center py-l">
    <div class="spinner"></div>
  </div>
  
  
  <div x-show="!isLoading && currentFiles.length > 0" class="grid-2">
    <template x-for="file in currentFiles" :key="file.name">
      <div class="card-interactive" 
           :class="file.isDirectory ? 'cursor-pointer' : ''"
           :data-filename="file.name"
           @click="file.isDirectory && navigateToFolder(file)">
        <div class="card-body">
          <div class="flex items-center gap-s">
            <div class="text-xl flex-shrink-0" x-text="getFileIcon(file)"></div>
            <div class="flex-1 min-w-0">
              <h4 class="font-medium text-sm break-words" x-text="file.name"></h4>
              <div class="text-xs text-gray-600">
                <span x-show="!file.isDirectory">
                  <span x-text="formatFileSize(file.size)"></span>
                  <span class="mx-s">‚Ä¢</span>
                </span>
                <span x-text="formatDate(file.modified)"></span>
              </div>
            </div>
            <div class="flex gap-s flex-shrink-0">
              
              <template x-if="activeTab === 'configs'">
                <div class="flex gap-s">
                  <template x-if="file.isDirectory">
                    <button @click.stop="navigateToFolder(file)" 
                            class="btn btn-ghost btn-sm" 
                            :title="$store.i18n.t('files.openFolder')">
                      üìÇ
                    </button>
                  </template>
                  <template x-if="!file.isDirectory">
                    <div class="flex gap-s">
                      <button @click.stop="viewFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              :title="$store.i18n.t('files.view')">
                        üëÅÔ∏è
                      </button>
                      <button @click.stop="editFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              :title="$store.i18n.t('files.edit')">
                        ‚úèÔ∏è
                      </button>
                      <button @click.stop="generateFromConfig(file)" 
                              class="btn btn-primary btn-sm" 
                              :title="$store.i18n.t('files.generate')">
                        üöÄ
                      </button>
                      <button @click.stop="deleteFile(file)" 
                              class="btn btn-danger btn-sm" 
                              :title="$store.i18n.t('files.delete')">
                        üóëÔ∏è
                      </button>
                    </div>
                  </template>
                </div>
              </template>
              
              
              <template x-if="activeTab === 'results'">
                <div class="flex gap-s">
                  <template x-if="file.isDirectory">
                    <button @click.stop="navigateToFolder(file)" 
                            class="btn btn-ghost btn-sm" 
                            :title="$store.i18n.t('files.openFolder')">
                      üìÇ
                    </button>
                  </template>
                  <template x-if="!file.isDirectory">
                    <div class="flex gap-s">
                      <button @click.stop="viewFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              :title="$store.i18n.t('files.view')">
                        üëÅÔ∏è
                      </button>
                      <button @click.stop="editFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              :title="$store.i18n.t('files.edit')">
                        ‚úèÔ∏è
                      </button>
                      <button @click.stop="downloadFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              :title="$store.i18n.t('files.download')">
                        ‚¨áÔ∏è
                      </button>
                      <button @click.stop="deleteFile(file)" 
                              class="btn btn-danger btn-sm" 
                              :title="$store.i18n.t('files.delete')">
                        üóëÔ∏è
                      </button>
                    </div>
                  </template>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
    </template>
  </div>
  
  
  <div x-show="!isLoading && currentFiles.length === 0" class="card">
    <div class="card-body empty-state">
      <div class="text-3xl mb-m">
        <span x-text="activeTab === 'configs' ? '‚öôÔ∏è' : 'üìä'"></span>
      </div>
      <h3 class="text-xl font-medium mb-s">
        <span x-show="activeTab === 'configs'" x-text="$store.i18n.t('files.noConfigurationsFound')"></span><span x-show="activeTab === 'results'" x-text="$store.i18n.t('files.noResultsFound')"></span>
      </h3>
      <p class="text-gray-600 mb-m">
        <span x-show="activeTab === 'configs'" x-text="$store.i18n.t('files.createFirstConfiguration')"></span>
        <span x-show="activeTab === 'results'" x-text="$store.i18n.t('files.generatedDataAppears')"></span>
      </p>
      <button x-show="activeTab === 'configs'" 
              @click="createNewConfig()" 
              class="btn btn-primary">
        <span x-text="$store.i18n.t('buttons.createConfiguration')"></span>
      </button>
    </div>
  </div>
</div>