<div class="stack">
  <!-- Header -->
  <div class="mb-m">
    <h2 class="text-2xl font-semibold">File Manager</h2>
    <p class="text-gray-600 mt-s">Manage your configurations and generated data</p>
  </div>
  
  <!-- Tabs -->
  <div class="flex gap-s mb-m">
    <button @click="switchTab('configs')" 
            class="btn" 
            :class="activeTab === 'configs' ? 'btn-primary' : 'btn-ghost'">
      ⚙️ Configurations
    </button>
    <button @click="switchTab('results')" 
            class="btn" 
            :class="activeTab === 'results' ? 'btn-primary' : 'btn-ghost'">
      📊 Results
    </button>
  </div>
  
  <!-- Breadcrumbs -->
  <nav x-show="currentPath" class="mb-m">
    <ol class="flex items-center gap-s text-sm">
      <template x-for="(crumb, index) in getBreadcrumbs()" :key="crumb.path">
        <li class="flex items-center">
          <button @click="navigateToBreadcrumb(crumb.path)" 
                  class="text-primary hover:underline"
                  :class="index === getBreadcrumbs().length - 1 ? 'font-medium' : ''"
                  x-text="crumb.name"></button>
          <span x-show="index < getBreadcrumbs().length - 1" class="mx-s text-gray-400">/</span>
        </li>
      </template>
    </ol>
  </nav>
  
  <!-- Actions -->
  <div class="flex justify-between items-center mb-m">
    <div class="text-sm text-gray-600">
      <span x-text="currentFiles.length"></span> files
    </div>
    <div class="flex gap-s">
      <button x-show="currentPath" 
              @click="navigateUp()" 
              class="btn btn-ghost btn-sm">
        ↑ Up
      </button>
      <button x-show="activeTab === 'configs'" 
              @click="createNewConfig()" 
              class="btn btn-primary btn-sm">
        + New Configuration
      </button>
    </div>
  </div>
  
  <!-- Loading -->
  <div x-show="isLoading" class="flex justify-center items-center py-l">
    <div class="spinner"></div>
  </div>
  
  <!-- Files Grid -->
  <div x-show="!isLoading && currentFiles.length > 0" class="grid-2">
    <template x-for="file in currentFiles" :key="file.name">
      <div class="card hover-card" 
           :class="file.isDirectory ? 'cursor-pointer' : ''"
           @click="file.isDirectory && navigateToFolder(file)">
        <div class="card-body">
          <div class="flex items-center gap-s">
            <div class="text-xl flex-shrink-0" x-text="getFileIcon(file)"></div>
            <div class="flex-1 min-w-0">
              <h4 class="font-medium text-sm break-words" x-text="file.name"></h4>
              <div class="text-xs text-gray-600">
                <span x-show="!file.isDirectory">
                  <span x-text="formatFileSize(file.size)"></span>
                  <span class="mx-s">•</span>
                </span>
                <span x-text="formatDate(file.modified)"></span>
              </div>
            </div>
            <div class="flex gap-s flex-shrink-0">
              <!-- Config actions -->
              <template x-if="activeTab === 'configs'">
                <div class="flex gap-s">
                  <template x-if="file.isDirectory">
                    <button @click.stop="navigateToFolder(file)" 
                            class="btn btn-ghost btn-sm" 
                            title="Open folder">
                      📂
                    </button>
                  </template>
                  <template x-if="!file.isDirectory">
                    <div class="flex gap-s">
                      <button @click.stop="viewFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              title="View">
                        👁️
                      </button>
                      <button @click.stop="editFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              title="Edit">
                        ✏️
                      </button>
                      <button @click.stop="generateFromConfig(file)" 
                              class="btn btn-primary btn-sm" 
                              title="Generate">
                        🚀
                      </button>
                      <button @click.stop="deleteFile(file)" 
                              class="btn btn-danger btn-sm" 
                              title="Delete">
                        🗑️
                      </button>
                    </div>
                  </template>
                </div>
              </template>
              
              <!-- Result actions -->
              <template x-if="activeTab === 'results'">
                <div class="flex gap-s">
                  <template x-if="file.isDirectory">
                    <button @click.stop="navigateToFolder(file)" 
                            class="btn btn-ghost btn-sm" 
                            title="Open folder">
                      📂
                    </button>
                  </template>
                  <template x-if="!file.isDirectory">
                    <div class="flex gap-s">
                      <button @click.stop="viewFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              title="View">
                        👁️
                      </button>
                      <button @click.stop="editFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              title="Edit">
                        ✏️
                      </button>
                      <button @click.stop="downloadFile(file)" 
                              class="btn btn-ghost btn-sm" 
                              title="Download">
                        ⬇️
                      </button>
                      <button @click.stop="deleteFile(file)" 
                              class="btn btn-danger btn-sm" 
                              title="Delete">
                        🗑️
                      </button>
                    </div>
                  </template>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
    </template>
  </div>
  
  <!-- Empty State -->
  <div x-show="!isLoading && currentFiles.length === 0" class="card">
    <div class="card-body text-center py-l">
      <div class="text-3xl mb-m">
        <span x-text="activeTab === 'configs' ? '⚙️' : '📊'"></span>
      </div>
      <h3 class="text-xl font-medium mb-s">
        No <span x-text="activeTab === 'configs' ? 'configurations' : 'results'"></span> found
      </h3>
      <p class="text-gray-600 mb-m">
        <span x-show="activeTab === 'configs'">Create your first configuration to start generating data.</span>
        <span x-show="activeTab === 'results'">Generated data will appear here.</span>
      </p>
      <button x-show="activeTab === 'configs'" 
              @click="createNewConfig()" 
              class="btn btn-primary">
        Create Configuration
      </button>
    </div>
  </div>
</div>