<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Data Generator - Create AI-powered data</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@unocss/reset/tailwind.min.css">
    
    <link rel="stylesheet" href="/css/design-system.css?v=4">
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script type="module" src="/js/app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="h-screen text-gray-700">
    <div id="app" x-data="app" x-init="init">
        <div x-show="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
            <div class="text-center">
                <div class="text-3xl mb-m">ü§ñ</div>
                <div class="text-lg font-medium text-gray-600">Loading...</div>
            </div>
        </div>

        <div x-show="!loading" x-transition>
            <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50">
                <div class="container">
                    <div class="action-row py-m">
                        <div class="flex items-center gap-s">
                            <span class="text-2xl">ü§ñ</span>
                            <h1 class="text-lg font-semibold text-gray-800" x-text="siteTitle || 'LLM Data Generator'"></h1>
                        </div>

                        <div class="flex items-center gap-m">
                            <div x-show="accountInfo" class="flex items-center gap-m text-sm">
                                <div class="flex items-center gap-s">
                                    <span class="text-gray-500" x-text="$store.i18n.t ? $store.i18n.t('account.balance') + ':' : 'Balance:'"></span>
                                    <span class="font-medium text-gray-800">$<span x-text="accountInfo?.balance || '0'"></span></span>
                                </div>
                                <div class="text-gray-400">‚Ä¢</div>
                                <div class="flex items-center gap-s">
                                    <span class="text-gray-500" x-text="$store.i18n.t ? $store.i18n.t('account.limit') + ':' : 'Limit:'"></span>
                                    <span class="font-medium text-gray-800">$<span x-text="accountInfo?.limit || '0'"></span></span>
                                </div>
                                <div class="text-gray-400">‚Ä¢</div>
                                <div class="flex items-center gap-s">
                                    <span class="text-gray-500" x-text="$store.i18n.t ? $store.i18n.t('account.used') + ':' : 'Used:'"></span>
                                    <span class="font-medium" 
                                          :class="accountInfo?.percentUsed > 80 ? 'text-error' : accountInfo?.percentUsed > 50 ? 'text-warning' : 'text-success'"
                                          x-text="(accountInfo?.percentUsed || 0) + '%'"></span>
                                </div>
                            </div>

                            <div class="flex gap-2">
                                <button @click="$store.i18n.setLocale('en')" 
                                        class="btn btn-ghost btn-sm"
                                        :class="$store.i18n.currentLocale === 'en' ? 'btn-primary' : ''" 
                                        title="English">
                                    üá∫üá∏
                                </button>
                                <button @click="$store.i18n.setLocale('ru')" 
                                        class="btn btn-ghost btn-sm"
                                        :class="$store.i18n.currentLocale === 'ru' ? 'btn-primary' : ''" 
                                        title="–†—É—Å—Å–∫–∏–π">
                                    üá∑üá∫
                                </button>
                            </div>

                            <div x-show="isAuthenticated" class="relative" x-data="{ open: false }">
                                <button @click="open = !open" class="btn btn-ghost btn-sm">
                                    <span class="text-lg">üë§</span>
                                </button>
                                
                                <div x-show="open" @click.away="open = false" 
                                     x-transition
                                     class="dropdown-menu">
                                    <div class="px-m py-s border-b border-gray-200">
                                        <div class="text-sm font-medium text-gray-700" x-text="user?.email"></div>
                                    </div>
                                    <a href="#" @click="logout" class="nav-link">
                                        üö™ <span x-text="$store.i18n.t('buttons.logout')"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="flex h-screen">
                <nav class="sidebar" :class="{'sidebar-collapsed': !sidebarOpen}">
                    <div class="stack-s">
                        <button @click="toggleSidebar()" 
                                class="nav-link hover:bg-gray-100"
                                title="Toggle Sidebar">
                            <span class="nav-icon">‚ò∞</span>
                            <span class="nav-label" x-show="sidebarOpen">Menu</span>
                        </button>
                        
                        <div class="border-t border-gray-200 mt-s pt-s"></div>
                        
                        <template x-for="item in navigation" :key="item.path">
                            <a :href="'#' + item.path"
                               @click="currentRoute = item.path"
                               :class="currentRoute === item.path ? 'nav-link nav-link-active' : 'nav-link'">
                                <span class="nav-icon" x-text="item.icon"></span>
                                <span class="nav-label" x-show="sidebarOpen" x-text="$store.i18n.t ? $store.i18n.t(item.labelKey) : item.labelKey"></span>
                            </a>
                        </template>
                    </div>

                    <div x-show="isAdmin" class="mt-l pt-l border-t border-gray-200">
                        <div>
                            <div x-show="sidebarOpen" class="text-sm font-medium text-gray-500 uppercase mb-s nav-label" x-text="$store.i18n.t ? $store.i18n.t('navigation.admin') : 'Admin'"></div>
                            <a href="#/admin"
                               @click="currentRoute = '/admin'"
                               :class="currentRoute === '/admin' ? 'nav-link nav-link-active' : 'nav-link'">
                                <span class="nav-icon">üë•</span>
                                <span class="nav-label" x-show="sidebarOpen" x-text="$store.i18n.t ? $store.i18n.t('navigation.users') : 'Users'"></span>
                            </a>
                        </div>
                    </div>
                </nav>

                <main class="flex-1 p-m">
                    <div :class="currentRoute === '/admin' ? 'w-full' : 'max-w-4xl mx-auto'">
                        <div x-show="!loading && !hasApiKey" class="alert alert-warning mb-m">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-medium">‚ö†Ô∏è No API key configured</p>
                                    <p class="text-sm mt-s">You need to configure your OpenRouter API key to generate data.</p>
                                </div>
                                <a href="#/settings" class="btn btn-primary btn-sm">
                                    Configure API Key
                                </a>
                            </div>
                        </div>
                        
                        <div id="page-content"></div>
                    </div>
                </main>
            </div>
        </div>

        <div id="notifications" class="notification-container stack-s"></div>
    </div>
</body>
</html>